<div class="formattedText" data-external-links="">
                                <p>Nesta aula, vamos detalhar mais recursos da Lightsail.</p>
<h2>Eliminando uma instância</h2>
<p>Assim como foi fácil provisionar, é bastante simples eliminar nossa instância. Na tela inicial da interface da Lightsail, clicaremos no símbolo de três pontos no canto direito superior da instância WordPress-1 e selecionaremos "<em>Delete</em>". Surgirá um aviso no centro da tela para confirmarmos a ação, basta pressionar o botão "<em>Yes, delete</em>" à direita. Após alguns segundos, a instância será deletada.</p>
<p>Na aula passada, tínhamos associado um IP a essa instância. Para verificar se ele também foi eliminado, podemos acessar a aba "<em>Networking</em>". Notaremos que o "Staticip-wp" ainda existe, porém ele <strong>não está anexado a nenhuma máquina, o que gerará custos para nós</strong>. Então, vamos clicar no símbolo de três pontos no canto superior direito de "Staticip-wp" e selecionar "<em>Delete</em>". Novamente, haverá um aviso de confirmação, basta clicar em "<em>Yes, delete</em>" à direita.</p>
<p>É sempre importante fazer essa "faxina", removendo recursos que não estamos utilizando para não gerar custos desnecessários.</p>
<p>A seguir, vamos detalhar o processo de criação de VMs (<em>virtual machines</em> ou máquinas virtuais). Na aba "<em>Instances</em>", vamos clicar novamente no botão "<em>Create instance</em>". No tópico "<em>Select a platform</em>", selecionaremos "Linux/Unix" para criar uma instância Linux. No tópico "<em>Select a blueprint</em>", vamos clicar em "OS Only" e selecionar "Ubuntu 20.04 LTS".</p>
<h2>Regiões e zonas de disponibilidade</h2>
<p>Antes de continuar a configuração da nossa máquina virtual, voltaremos ao tópico "<em>Instance location</em>" (no topo da página) para conversar sobre a questão da localização, ou seja, <strong>onde vamos provisionar nossa instância</strong>. Ao clicar em "<em>Change AWS Region and Availability Zone</em>", teremos as seguintes <strong>regiões</strong> à disposição:</p>
<ul><li>Virginia (us-east-1)</li><li>Ohio (us-east-2)</li><li>Montreal (ca-central-1)</li><li>Oregon (us-west-2)</li><li>Ireland (eu-west-1)</li><li>London (eu-west-2)</li><li>Paris (eu-west-3)</li><li>Frankfurt (eu-central-1)</li><li>Stockholm (eu-north-1)</li><li>Tokyo (ap-northeast-1)</li><li>Sydney (ap-southeast-2)</li><li>Mumbai (ap-south-1)</li><li>Seoul (ap-northeast-2)</li><li>Singapore (ap-southeast-1)</li></ul>
<p>Logo abaixo, ao clicar em "<em>Change your Availability Zone</em>", podemos consultar as <strong>zonas de disponibilidade</strong> da região selecionada. Por exemplo, na região da Virginia, existem as seguintes zonas:</p>
<ul><li>Zone A (us-east-1a)</li><li>Zone B (us-east-1b)</li><li>Zone C (us-east-1c)</li><li>Zone D (us-east-1d)</li><li>Zone E (us-east-1e)</li><li>Zone F (us-east-1f)</li></ul>
<p>Em suma, em um provedor de nuvem, temos regiões (por exemplo, leste da América do Norte). Dentro delas, há zonas de disponibilidade — geralmente, três ou mais zonas. Para que uma região inteira esteja fora do ar, todas as zonas de disponibilidade devem falhar. Supondo que construímos uma aplicação em várias zonas de disponibilidade, se uma delas vier a falhar, as outras continuarão no ar dentro da mesma região. É assim que funciona essa arquitetura.</p>
<p>Vamos manter o padrão selecionado:</p>
<ul><li><strong>Região:</strong> Virginia (us-east-1)</li><li><strong>Zona de disponibilidade:</strong> Zone A (us-east-1a)</li></ul>
<p>Em seguida, vamos voltar à configuração da nossa instância.</p>
<h2>Chave SSH</h2>
<p>Dentro do tópico "<em>Optional</em>", somos informados de que vamos nos conectar à instância usando a <strong><em>chave SSH default</em></strong>, via console. Entretanto, também temos a opção de <strong>criar uma chave</strong>, clicando em "<em>Change SSH key pair</em> &gt; Create New". Surgirá um aviso na tela, nos lembrando de que as chaves funcionam por região. Ou seja, se criarmos outra instância em outra localização, será necessário gerar outra chave, caso não optemos pela chave padrão. Vamos clicar no botão "<em>Create</em>" no canto direito inferior.</p>
<p>Em seguida, atribuiremos o nome "lightsail-rmerces" e pressionaremos "<em>Generate key pair</em>". O par de chaves será gerado e só podemos fazer o download dessa chave privada <strong>uma única vez</strong>. Basta clicar em "<em>Download private key</em>". Caso você perca a chave, será preciso apagá-la e criar outra. Portanto, guarde-a com cuidado. Podemos pressionar "<em>Okay, got it</em>" para fechar.</p>
<h2>Snapshots automáticos</h2>
<p>Na sequência, temos a opção de habilitar a funcionalidade de gerar <em>snapshots</em> automaticamente, marcando a caixa "<em>Enable Automatic Snapshots</em>" e programando o horário desejado. No caso, não vamos usar essa funcionalidade.</p>
<h2>Tipo de máquina</h2>
<p>Prosseguindo com a configuração da instância, chegamos ao tópico "<em>Choose your instance plan</em>", em que podemos escolher o <strong>tipo de máquina</strong>. É possível ordenar as opções por preço por mês, memória, processamento, capacidade de armazenamento ou de transferência.</p>
<p>Por fim, vamos manter o nome da nossa instância como "Ubuntu-1" e nosso <em>setup</em> estará pronto. Vamos clicar no botão "<em>Create instance</em>" ao final da página. Na tela inicial da Lightsail, é possível verificar a instância sendo provisionada. Após alguns minutos, o status mudará de "<em>Pending</em>" para "<em>Running</em>" — finalizamos a criação.</p>
<h2>Usando a chave</h2>
<p>Anteriormente criamos a chave SSH. Na console, vamos acessar o diretório onde fizemos o download dela e executar o comando <code>ls</code> para listar os arquivos e encontrar a chave <code>lightsail-rmerces.pem</code>.</p>
<p>Por padrão, antes de usá-la, é preciso mudar o permissionamento:</p>
<pre class="prettyprint"><code class="hljs language-bash"><span class="hljs-built_in">chmod</span> 400 lightsail-rmerces.pem</code><button type="button" class="clipit">Copiar código</button></pre><p>Agora, executando <code>ls -l</code>, vamos reparar que a chave terá direito de leitura somente para o dono. Para utilizá-la, rodaremos o comando <code>ssh -i lightsail-rmerces.pem</code> seguido do usuário, um símbolo de arroba e o <em>host</em>. No caso, o usuário <em>default</em> é <code>ubuntu</code> e o <em>host</em> é o IP da máquina virtual:</p>
<pre class="prettyprint"><code class="hljs language-css">ssh -<span class="hljs-selector-tag">i</span> lightsail-rmerces<span class="hljs-selector-class">.pem</span> ubuntu<span class="hljs-keyword">@44</span>.205.17.187</code><button type="button" class="clipit">Copiar código</button></pre><blockquote>
<p>É possível que apareça um aviso sobre a autenticidade do <em>host</em>. Caso isso ocorra, digite "yes" para prosseguir.</p>
</blockquote>
<p>Feito isso, estaremos dentro da nossa instância. Na sequência, podemos fazer instalações e <em>updates</em>, como em uma máquina Ubuntu normal.</p>
<p>A chave é uma forma interessante de organização, mas vamos supor que decidimos delegar os cuidados dessa máquina para outra pessoa e ela não quer se preocupar com a chave. Será que o cliente SSH que acessamos anteriormente ainda funciona? Na interface da Lightsail, podemos clicar no terminal no canto superior direito da instância Ubuntu-1 e notaremos que ainda podemos usar essa opção.</p>
<p>Na próxima aula, vamos atualizar a instância, instalar um servidor Web e explorar outros recursos.</p>
                        </div>